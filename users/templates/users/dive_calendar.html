
{% extends 'users/base.html' %}

{% block users_title %}Dive Calendar - CoralOffice{% endblock %}

{% block users_content %}
<div style="display: flex; justify-content: between; align-items: center; margin-bottom: 30px;">
    <h2>Dive Calendar</h2>
    <a href="{% url 'users:schedule_dive' %}" class="btn">Schedule New Dive</a>
</div>

{% for dive in dives %}
<div class="user-card">
    <h3>{{ dive.activity.name }} - {{ dive.dive_site }}</h3>
    <p><strong>Date & Time:</strong> {{ dive.date }} at {{ dive.time }}</p>
    <p><strong>Max Participants:</strong> {{ dive.max_participants }}</p>
    <p><strong>Registered:</strong> {{ dive.customers.count }} participants</p>
    {% if dive.description %}
        <p><strong>Description:</strong> {{ dive.description }}</p>
    {% endif %}
    
    {% if dive.customers.exists %}
        <div style="margin-top: 15px;">
            <strong>Participants:</strong>
            <ul style="margin: 5px 0; padding-left: 20px;">
                {% for customer in dive.customers.all %}
                    <li>{{ customer.first_name }} {{ customer.last_name }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</div>
{% empty %}
<p>No dives scheduled yet. <a href="{% url 'users:schedule_dive' %}">Schedule your first dive</a>.</p>
{% endfor %}

<a href="{% url 'users:diving_center_dashboard' %}" class="btn" style="background: #6c757d;">Back to Dashboard</a>
{% endblock %}
